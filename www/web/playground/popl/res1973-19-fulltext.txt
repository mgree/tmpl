transitions in arrays l mathematical sciences department ibm watson research center new york arrays are among the best understood and most widely used data structures yet even now there are no satisfactory techniques for handling involving arrays where eg rows andor columns can be added dynamically in this paper the problem of allocating storage for arrays is examined in the light of our earlier work on data graphs and addressing schemes a formal of the assertion that simplicity of array extension simplicity of trans along is proved introduction few classes of data structures are as well understood or as widely used as are arrays the most primitive of high level languages offer some array processing facilities certain languages such as have been designed with arrays as the basic data structure one in current techniques for handling arrays is the handling of arrays arrays whose sizes in vari dimensions may change in the course of ing an algorithm consider for instance a ation in which a array is stored by rows should one wish to add a new row to this array one could do so with no material change to the functions which access elements of the array or which are used to traverse rows or columns of the array in contrast adding a column to this array would create two one could store the column and thereby the simplicity transition functions of the and or one could opt to pre serve the simplicity of these functions at the of storage for the whole array only elements of the first row of the old array would escape being moved note that we are ignoring all problems that because of other material stored our array is such in the handling of rows and columns do there exist schemes for allocating storage for arrays which are at once easily and easily accessible and of course a formal framework is required before one can even state these questions with precision in section we discuss ing a model for arrays which ing problems of implementation the problem of find is suitable for study and this research was supported in part by contract we on two models each of which is in certain contexts the array which is oriented towards languages such as fortran and pl models a situation where no attempt to add both rows and columns dynamically to an array is the array which is compatible with the apl view of arrays models situations where no constraints on dynamic extensions to an array are assumed section is to study ing array in which row andor column transitions are very efficient being realized by additive using the auxiliary notion of a shift chain and between the models are demonstrated we prove in a sense made precise in the text that the goals of easy extension of arrays adding rows or columns at will and of efficient transition along both rows and columns are incompatible how ever we demonstrate also that these goals can almost be simultaneously at the cost of inefficient storage the material fully in the first in this paper half of is developed more basic notions a arrays and their a definition of array suitable for studying array implementation should a expose the structure in array which implementation and b specify those moves in the array which are to be implemented efficiently let n denote nn i n for the positive integers and let a nl scheme of size is an ordered pair a pm where d n is the of k positions of the array b m is a finite set of each move being a partial transformation p of the set of positions in this and subsequent discussions we concentrate on two dimensional arrays for ease of the formal sections of the paper do not share this restriction a pm ia a standard array if m uj where for arbitrary x p x xl k i if if undefined ij i j i if otherwise l j x l if ij j i f ij otherwise a is the j j th the j axis successor predecessor if j in this paper however our proof general to overcome a standard of by picture we study only standard arrays technique are sufficiently this restriction figure array of size the should be our notion of realization or implementation of an array is as general as possible our notion is to establishing a between in th array realized and in an infinite linear space of addresses see for discussion in a more general setting of the behind our definition a a realization pair of total of the array a p m ia a functions r p where a p n is the storage b pm partial n is the access subject to the conditions c ia in the precisely when transformations domain of of pu d if pc then these conditions assert that transitions in the array can be within the realization and that any transition in the realization reflects one in the array definition is easily illustrated following realization of the array of figure by the a for i b using notation for functions familiar lambda u p ann ann ann np ann note that and rp are both the former being defined the latter only on this realization only on of of figure the layout of storage and under our notion of realization three criteria for and the fourth suggests immediately the quality of a real example suggests a a complexity of element access the complexity of the storage map b complexity of transition the tional complexity of the transition functions mp c complexity of extension the complexity of obtaining from a realization of an array a of size nl nk a real of a of a of size n each where nil i i ie the extent to which for and p must be changed d of storage the extent to which a storage map leaves ie is not onto a prefix np of n the main of the investigation of which this paper is the first output is to determine tradeoffs between criterion c and the other three criteria here we concentrate on criterion b vs criterion c in we study all four as well as other of easy extension we do not at this point wish to our down to precise interpretations of a d this is at least because we feel that these notions do not admit absolute definitions the pro of a given notion of efficiency may depend on the intended computing environment even at an intuitive level however we can remark that realization has the following characteristics a element access is not simple since is exponential in i and j b transition is rather simple since each step involves just one multiplication division c extension is very simple p be changed at f and v d storage is not efficient since only of the affected locations are used ie only of n is used for storing the array we contrast ing realization scheme with the follow strictly speaking the domain of would have to be but we ignore this formal point since the required extension of is straight forward and requires no change to on p a for ij b ann ann np nl if n z o mod undefined n if otherwise n mod undefined otherwise figure illustrates storage under realization an intuitive notion of simplicity evaluate this realization relative of the layout of as before even suffices to to the criteria a element access is simple linear in i and j since is b transition is simple since each step involves a single plus possibly a test for a class modulo c ease of extension is more complicated to evaluate adding a row is very simple change n k r ing a column is rather difficult p ii must p so d storage is very efficient the cells of the array being assigned to locations for is it is easily extended than the not we the that realization which admit more complicated trans easily extended realization way for this question b two models for arrays we need a model for arrays which allows us to discuss now easy extension is by a situation where the storage map for the extended array is just a functional extension of the storage map of the original array therefore easy extension along a certain direction is if one constructs a paper realization not of the array in question but rather of a which is infinite along the desired direction one then the array in hand by a functional tion of the storage map of the infinite array is thus in an array scheme which is infinite in every direction one whose positions are the lattice points of the positive of these infinite array schemes us the desired models of arrays models which ensure simplicity of extension of an allocation scheme as we study simplicity of trans of infinite arrays are not to who considered of finite arrays one would be hard put to specify a realization of an array which not really the restriction of a realization of an infinite array scheme which had the given array as a prefix for instance realization of our array of size is a restriction the dimensional of a realization of the is the pair pk ik a pk nk where k times b for x x kk if ij and i if ij if p xi if undefined ij if ij otherwise ia the axis j successor j the axis j predecessor and t is similarly realization realization of the following array as can be seen ease of adding rows in that is a restriction dimensional in our comment realization of a column about the the dimensional the pair pm where array is a p c b m for i jn undefined if il otherwise i if undefined otherwise if undefined otherwise is obviously a prefix in the second coordinate of which is bounded by considering generally prefixes of ik which are bounded in k one obtains the family of arrays hybrid arrays obtained by bounding fewer can of course be defined than k reader can easily extend our results to such by array as of infinite array schemes we shall be better able to recognize the type of extension which they admit conversely by con for an infinite array scheme which models the kind of array extensions one to facilitate one can attempt to optimize our other quality criteria all the while being of ease of extension allocation schemes with additive transitions many computational procedures call for traversal of the eg rows or columns of arrays we now consider how compatible ion b ease of transition is with our main topic of study criterion c simplicity of extension we have to this point avoided down any notion of simplicity of transition at this point we can no longer such ness however we shall restrict our attention in the main to two types of access maps which are so obviously efficient that we have no in labelling them so namely access maps which assoc with an axis successor a possibly additive relative to this rather strong notion of efficient transition we the and models to establish formal of the following results i no array realization which simple transitions along both rows and columns admits simple ad of both rows and columns ii no easily array realization simple transition along both rows and columns the negative impact of these results is by a readily realization with relatively transitions but with inefficient storage this last example will serve also to at the of establishing formal of i which are stronger than ours a shift chains the development in this section is by a slight into a more abstract work specifically we introduce the notion of a shift of a set and the related notions of shift and shift chains let a be a transformation of a set s ie a possibly for any nonnegative function integer k from define s into s k by ° s the identity il the function on s and composition i of with x for arbitrary t written sat if we say that sa k t for a some that is successive steps along say a row are by adding a given constant which in the case depends on the row the material elementary can ground in this section some concepts of modern algebra the reader a beginning text like for back clearly is a transitive i the transformation if the following relation a is a shift three conditions of s hold a k is injective b is cycle free for no k have a fixed point c each the range of has a which is not in sa for any shift a the relation a which we now refer to as a shift relation is a strong partial order that is it is asymmetric and as well as transitive even the order i orders the relation ie the union can thus of disjoint be viewed a collection of parallel shift chains each chain with a minimum element which mx which in turn is connected to is connected ml to and so on possibly forever our interest in shift chains and relations from the fact that the axis successors of array schemes are shifts as indeed are all func tions obtained as finite compositions of the e g diagonal successors like u no axis predecessor is a shift in arrays since the predecessors relations lack minimal elements each predecessor save one is a shift in a array in finite the of predecessor and successor are at the of the so both types of transformations are shifts thus information about of shift relations can be translated into information about array with on the access maps we consider first the problem of a single shift relation let s be a set let a be a shift of s and let ma s s be the set of minimal elements of the shift relation let a s n be a total function we say that t has the a additive property for k if for each there is a constant such that for all if mc then m b uniform additive property for i if there is a constant kn such that for all if se then st k the term additive derives from the fact that any can be traversed by successive additions of a constant which depends only on the chain the term uniformly additive indicates that all chains are by the same constant when can we find a t with one of these pro some terminology will help us expose the answer the shift relation each shift chain is of finite is finitary a if length the relation is finite if the set of minimal a elements is so that there are but a finite number of shift chains finally a is limited if all but finitely many of its shift chains are of finite length theorem shift let a s be a countable set with a a there is a total n with the additive map property for b when a one map when a is limited n is limited and only there is a total one with the uniform additive property for l in general we are interested in more than one shift in an efficient way for example one would usually wish both row and column successors to be easy transitions in a matrix it appears that results about two or more shifts can be only in a concrete environment where information about the relation among the shifts can be to bear hence we defer consideration of with the uniform additive property for several shifts to the next subsection where we consider only arrays however an important negative result with tions for arrays can be formulated the present framework let and p be shifts of the set s we say that i and p are independent if there do not exist and for which sl of course we assume both are defined in particular a or finitary is limited if it is either in the context of arrays independence is linear independence of vector when i and u are total independence is precisely linear independence as an example any two axis successors of our array models are independent in any theorem let s be an infinite and u be independent there is no total has the additive property set and let total shifts of s map s n which for both a and u theorem can be generalized along the following lines say that the not necessarily total independent shifts a and v are both to be realized with the additive property then intuitively if the from is long then the from s must be short and vice versa b applications to arrays rather than section a we return schemes for arrays theorems and continue in the abstract to our study of allocation but we do so in the light of of transitions in in any array one axis successor is a and each of the others is a finitary shift of the set of cells hence by theorem any single successor can be realized with the uniform additive property in fact the of the axis successors can be to realize all successors with the uniform additive proper such totally additive schemes can be easily derived from the familiar schemes used in compilers for languages like fortran and a derivation of such schemes appears in p note however that these familiar schemes must be modified somewhat to with the restriction c pp is in the domain precisely when in the definition of realization to be more precise the schemes to are good of arrays but they are not totally additive note for example our which implements the dimensional column array using a scheme like those in cf figure note in that up was defined as follows for all nl if n o mod np undefined otherwise we could function not opt here to let be the successor or else we would have ill while iu ill this problem is overcome by adding scheme of realization for instance to the strictly speaking the terms and finitary have been ever the defined only for shift relations reader should have little problem our usage in a for ij i j b nn j np the modified storage layout is depicted in figure for the loss of less than storage in the limit one thus obtains a totally tive realization of this array using as a model the reader can most derive the appropriate modifications of the general schemes in p thus are very efficient extension what ease of extension arrays admit transition which at the cost of ease happens to ease of transition is of when transitions in arrays in an array all axis successors are total and none is limited any two distinct successors are independent shifts of the set of cells from these facts one can deduce fact theorem any single can be realized with the additive none can be realized with the uniform property axis property but additive fact the additive successor theorem property no realization can have for more than one axis fact is the formal version of our assertion that in some sense ease of extension which is in an realization is incompatible with ease of transition which we are with the additive property together with our earlier discussion fact points out why the model is to be when extension is of little concern how well can one do with the by fact at the cost of quite inefficient storage one can do rather well ­ at least in two dimensions consider the following realization which is depicted in figure a for ij j b tip for ij p ij i i if jl undefined otherwise in this realization the row u is additive while the column successor al is not additive it is just multiplication by an easily implemented operation on most computers thus this realization quite efficient transitions ae well as easy extension however lt is a rather realization in its of storage and it quickly in this respect observe that k elements for a k row prefix of nk are used as the prefix implemented grows by adding rows an m row n column prefix uses only mn of the locations affected by the allocation so that in the extreme a column vector use exponentially fewer of the affected locations as it grows such is an of any realization with a multiplicative transition realization is valuable not necessarily as a technique for allocating storage for arrays but as an illustration of the complicated inter play among the quality criteria of it also that a stronger statement than fact of the of ease of extension and ease of transition will require formulation we have thus of whether or not the arrays at least in special do exist far left the question there is a good realization of in we demonstrate that situations such good real much study is needed before we really under stand these best understood of all data structures it is a to the ment and of several of mv notably john s and references a l data and addressing schemes jc ss a l exploiting address ability in data graphs in computational complexity computer science symposium r cd algorithmic press new york a l allocating storage for arrays ibm report rc also submitted for publication a l inherent limitations of array in pre background g and s mac a survey of modern algebra new york d e knuth the art of computer program ming i fundamental algorithms addisonwesley reading mass figure the array scheme a of size figure realization a sparse realization of a figure realization the array a stored by rows figure realization realization dimensional a totally of the column array additive figure realization a realization with simple transitions of 